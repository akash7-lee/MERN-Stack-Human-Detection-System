{"ast":null,"code":"import React,{useState,useEffect}from'react';import*as cocoSsd from'@tensorflow-models/coco-ssd';import DetectionCanvas from'./components/DetectionCanvas';import Controls from'./components/Controls';import Stats from'./components/Stats';import{saveDetection,getDetections}from'./services/api';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[model,setModel]=useState(null);const[loading,setLoading]=useState(true);const[detectionMode,setDetectionMode]=useState(null);const[stats,setStats]=useState({peopleCount:0,confidence:0,fps:0});const[detectionHistory,setDetectionHistory]=useState([]);useEffect(()=>{loadModel();fetchDetectionHistory();},[]);const loadModel=async()=>{try{setLoading(true);const loadedModel=await cocoSsd.load();setModel(loadedModel);setLoading(false);}catch(error){console.error('Error loading model:',error);setLoading(false);}};const fetchDetectionHistory=async()=>{try{const data=await getDetections();setDetectionHistory(data);}catch(error){console.error('Error fetching history:',error);}};const handleSaveDetection=async detectionData=>{try{await saveDetection(detectionData);fetchDetectionHistory();}catch(error){console.error('Error saving detection:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDFAF MERN Stack Human Detection\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Real-time AI-powered person detection\"})]}),/*#__PURE__*/_jsx(\"main\",{className:\"App-main\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading AI Model...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Controls,{model:model,detectionMode:detectionMode,setDetectionMode:setDetectionMode,setStats:setStats,onSaveDetection:handleSaveDetection}),/*#__PURE__*/_jsx(DetectionCanvas,{model:model,detectionMode:detectionMode,setStats:setStats}),/*#__PURE__*/_jsx(Stats,{stats:stats}),/*#__PURE__*/_jsxs(\"div\",{className:\"history-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Detection History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"history-grid\",children:detectionHistory.slice(0,10).map(detection=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-card\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"history-count\",children:[\"\\uD83D\\uDC65 \",detection.peopleCount,\" person(s)\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"history-confidence\",children:[\"\\uD83D\\uDCCA \",Math.round(detection.avgConfidence),\"% confidence\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"history-time\",children:[\"\\uD83D\\uDD52 \",new Date(detection.timestamp).toLocaleString()]})]},detection._id))})]})]})})]});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}